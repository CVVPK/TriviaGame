(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{57:function(e,t,a){e.exports=a(77)},62:function(e,t,a){},77:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(18),s=a.n(i),c=(a(62),a(37)),o=a(110),u=a(42),l=a(19),m=a(16),p=a(23),f=a(20),h=a(24),d=r.a.createContext(),y=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(p.a)(this,Object(f.a)(t).call(this,e))).state={category:JSON.stringify({id:9,name:"General Knowledge"}),difficulty:"easy"},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"handleChange",value:function(e){var t=e.target,a=t.value,n=t.name;this.setState(Object(u.a)({},n,a))}},{key:"handleClick",value:function(e){""===this.state.category||""===this.state.difficulty?alert("Set difficulty and category"):this.setState(this.props.setDisplayGame(!0))}},{key:"render",value:function(){return r.a.createElement(d.Provider,{value:{state:this.state,categoryId:JSON.parse(this.state.category).id,categoryName:JSON.parse(this.state.category).name,difficulty:this.state.difficulty,onChange:this.handleChange.bind(this),onClick:this.handleClick.bind(this)}},this.props.children)}}]),t}(r.a.Component),v=a(10),g=a(102),E=a(12),b=a.n(E),w=a(30),k=a(17),j=Object(k.a)(b.a.mark(function e(){var t;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"api_token.php?command=request",e.next=3,O("api_token.php?command=request",!1);case 3:return t=e.sent,e.abrupt("return",t.token);case 5:case"end":return e.stop()}},e)}))();function O(e){return C.apply(this,arguments)}function C(){return(C=Object(k.a)(b.a.mark(function e(t){var a,n=arguments;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!(n.length>1&&void 0!==n[1])||n[1])){e.next=9;break}return e.t1="&token=",e.next=5,j;case 5:e.t2=e.sent,e.t0=e.t1.concat.call(e.t1,e.t2),e.next=10;break;case 9:e.t0="";case 10:return a=e.t0,"https://opentdb.com/",e.abrupt("return",new Promise(function(e,n){var r=new XMLHttpRequest,i="https://opentdb.com/"+t+a;r.open("GET",i),r.send(),r.addEventListener("readystatechange",function(){if(4===r.readyState){var t=JSON.parse(r.responseText);t.hasOwnProperty("response_code")?0===t.response_code?e(t):n(t.response_code):t.hasOwnProperty("trivia_categories")&&e(t)}})}));case 13:case"end":return e.stop()}},e)}))).apply(this,arguments)}function x(e){return G.apply(this,arguments)}function G(){return(G=Object(k.a)(b.a.mark(function e(t){var a,n,r,i,s,c=arguments;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.category,n=t.difficulty,r=c.length>1&&void 0!==c[1]?c[1]:50,i=["api.php?amount=".concat(r),"category=".concat(a),"difficulty=".concat("ultimate"!==n?n:"")],e.next=5,O(i.join("&"));case 5:return s=e.sent,e.abrupt("return",s.results);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}var S=r.a.createContext(),Q=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(p.a)(this,Object(f.a)(t).call(this,e))).state={questions:[],question:"",correct_answer:"",answers:[],newQ:a.props.newQ,refilling:!1,refillPromise:void 0},a.setQAndA=a.setQAndA.bind(Object(v.a)(a)),a.populateQuestions=a.populateQuestions(),a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"populateQuestions",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return Object(k.a)(b.a.mark(function a(){var n,r;return b.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,x(e.props,t);case 3:return n=a.sent,r=[].concat(Object(w.a)(n),Object(w.a)(e.state.questions)),e.setState({questions:r}),a.abrupt("return");case 9:a.prev=9,a.t0=a.catch(0),4===a.t0&&t>=2&&(t=Math.floor(t/2));case 12:if(t>2){a.next=0;break}case 13:throw Error("No more Questions!");case 14:case"end":return a.stop()}},a,null,[[0,9]])}))}},{key:"refillQuestions",value:function(){var e=this;if(!this.state.refilling){var t=new Promise(function(t,a){e.populateQuestions().then(function(){e.setState({refilling:!1}),t()}).catch(function(e){return a(e.message)})});this.setState({refilling:!0,refillPromise:t})}}},{key:"setQAndA",value:function(){var e=this;try{var t=this.question,a=t.question,n=t.correct_answer,r=t.incorrect_answers,i=T([n].concat(Object(w.a)(r)));this.setState({question:a,correct_answer:n,answers:i})}catch(s){if("Refilling"!==s.message)throw s;this.props.pauseGame(),this.state.refillPromise.then(function(){e.setQAndA(),e.props.resumeGame()}).catch(function(t){e.props.resumeGame(),e.props.finishGame(t)})}}},{key:"componentDidMount",value:function(){var e=this;this.populateQuestions().then(function(){e.setQAndA(),e.props.startGame()})}},{key:"componentDidUpdate",value:function(){this.props.newQ!==this.state.newQ&&(this.setState({newQ:!this.state.newQ}),this.setQAndA())}},{key:"render",value:function(){return r.a.createElement(S.Provider,{value:{state:this.state,onClick:this.props.onClick}},this.props.children)}},{key:"question",get:function(){var e=this.state.questions,t=e.pop();if(e.length<10&&this.refillQuestions(),void 0===t)throw Error("Refilling");return this.setState({questions:e}),t}}]),t}(r.a.Component),T=function(e){for(var t=e,a=t.length-1;a>0;a--){var n=Math.floor(Math.random()*(a+1)),r=[t[n],t[a]];t[a]=r[0],t[n]=r[1]}return t},_=a(103);function N(e){var t=e.score,a=e.endGameMsg;return r.a.createElement(g.a,{container:!0,direction:"column",justify:"center",alignItems:"center"},r.a.createElement(_.a,{variant:"h1",color:"textPrimary",justify:"center"},a),r.a.createElement(_.a,{variant:"h2",color:"textSecondary"},"Final Score: ",t))}var q=a(105);function A(e){var t=e.score;return r.a.createElement("div",{className:"score"}," Score: ",t)}var M=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(p.a)(this,Object(f.a)(t).call(this,e))).state={time:a.props.timeSettings.initTime,initExtra:a.props.timeSettings.initExtra,interval:null,paused:!1},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"startTimer",value:function(){var e=this,t=setInterval(function(){var t=e.state.time;e.setState({time:--t})},1e3);this.setState({interval:t})}},{key:"stopTimer",value:function(){clearInterval(this.state.interval)}},{key:"stopAtZero",value:function(){0===this.state.time&&(this.stopTimer(),this.props.finishGame("Time is up!"))}},{key:"pauseResume",value:function(){this.state.paused?this.startTimer():this.stopTimer(),this.setState({paused:!this.state.paused})}},{key:"addExtraTime",value:function(){var e=this.state.time;e+=this.state.initExtra,this.setState({time:e})}},{key:"componentDidMount",value:function(){this.startTimer()}},{key:"componentDidUpdate",value:function(e){var t=e.pause,a=e.extraTime;this.props.extraTime!==a&&this.addExtraTime(),this.props.pause!==t&&this.pauseResume(),this.stopAtZero()}},{key:"componentWillUnmount",value:function(){this.stopTimer()}},{key:"render",value:function(){return r.a.createElement("div",null,"Time Left: ",this.state.time)}}]),t}(r.a.Component);function I(e){return{easy:new P(30,10),medium:new P(20,5),hard:new P(10,2),ultimate:new P(5,1)}[e]}function P(e,t){this.initTime=e,this.initExtra=t}function D(e){var t=e.style;return r.a.createElement(S.Consumer,null,function(e){var a=e.state.question;return r.a.createElement("div",{style:t,dangerouslySetInnerHTML:{__html:a}})})}var J=a(104);function z(){return r.a.createElement(g.a,{container:!0,justify:"space-evenly",alignItems:"stretch",alignContent:"flex-end",spacing:1},r.a.createElement(S.Consumer,null,function(e){var t=e.state,a=t.answers,n=t.correct_answer,i=e.onClick;return a.map(function(e){return r.a.createElement(L,{key:e,answer:e,onClick:i,correct_answer:n})})}))}function L(e){var t=e.answer,a=e.onClick,n=e.correct_answer;return r.a.createElement(g.a,{item:!0,xs:5},r.a.createElement(J.a,{fullWidth:!0,style:R,variant:"contained",color:"primary",onClick:function(){return a(t===n)}},r.a.createElement(_.a,{variant:"h6"},r.a.createElement("span",{dangerouslySetInnerHTML:{__html:t}}))))}var R={padding:"5%",height:"100%"};function U(e){var t=e.state,a=t.score,n=t.extraTime,i=t.playing,s=t.pause,c=e.finishGame,o=e.difficulty,u=e.categoryName;return i?r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a,{container:!0,alignContent:"flex-start",justify:"space-between",direction:"column"},r.a.createElement(g.a,{container:!0,justify:"space-between"},r.a.createElement(_.a,{variant:"h5"},r.a.createElement(A,{score:a})),r.a.createElement(_.a,{variant:"h5"},r.a.createElement(M,{timeSettings:I(o),extraTime:n,finishGame:c,pause:s}))),r.a.createElement(g.a,{container:!0,justify:"space-between"},r.a.createElement(_.a,{variant:"subtitle1",color:"textSecondary",justify:"center"},"Category: ",u),r.a.createElement(_.a,{variant:"subtitle1",color:"textSecondary",justify:"center"},"Difficulty: ",W(o))),r.a.createElement(D,{style:B})),r.a.createElement(z,null)):r.a.createElement(g.a,{container:!0,justify:"center",direction:"column",alignItems:"center"},r.a.createElement(q.a,{size:100,thickness:5}))}var W=function(e){return e.replace(/^(\w)(.*)/,function(e,t,a){return t.toUpperCase()+a})},B={display:"flex",alignItems:"center",justifyContent:"center",flexGrow:1,textAlign:"center",fontSize:"2rem"},F=a(106);function H(){return r.a.createElement(g.a,{container:!0,justify:"space-between",direction:"column",style:K},r.a.createElement(_.a,{variant:"h1",align:"center",color:"primary",style:Z},"Getting More Questions"),r.a.createElement(F.a,{variant:"query"}))}var Z={marginTop:"25%"},K={zIndex:1,position:"absolute",left:0,top:0,right:0,bottom:0,opacity:.9,backgroundColor:"black"};function X(e){var t=e.props,a=t.state,n=a.pause,i=a.playing,s=a.finish,c=a.endGameMsg,o=a.newQ,u=a.score,l=t.state,m=t.startGame,p=t.finishGame,f=t.pauseGame,h=t.resumeGame,y=t.handleClick;return r.a.createElement(g.a,{container:!0},n&&r.a.createElement(H,null),!s&&r.a.createElement(d.Consumer,null,function(e){var t=e.state.difficulty,a=e.categoryId,n=e.categoryName;return r.a.createElement(Q,{startGame:m,finishGame:p,category:a,difficulty:t,newQ:o,onClick:y,pauseGame:f,resumeGame:h},r.a.createElement(U,{state:l,difficulty:t,finishGame:p,categoryName:n}))}),!i&&s&&r.a.createElement(N,{score:u,endGameMsg:c}))}var $=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(p.a)(this,Object(f.a)(t).call(this,e))).state={playing:!1,finish:!1,newQ:!1,score:0,extraTime:!1,endGameMsg:"",pause:!1},a.startGame=a.startGame.bind(Object(v.a)(a)),a.finishGame=a.finishGame.bind(Object(v.a)(a)),a.handleClick=a.handleClick.bind(Object(v.a)(a)),a.pauseGame=a.pauseGame.bind(Object(v.a)(a)),a.resumeGame=a.resumeGame.bind(Object(v.a)(a)),a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"handleClick",value:function(e){this.setState({score:function(t){var a=t.score;return a+=e?1:0}(this.state),extraTime:function(t){var a=t.extraTime;return e?!a:a}(this.state),newQ:!this.state.newQ})}},{key:"pauseGame",value:function(){this.setState({pause:!0})}},{key:"resumeGame",value:function(){this.setState({pause:!1})}},{key:"startGame",value:function(){this.setState({playing:!0})}},{key:"finishGame",value:function(e){this.setState({playing:!1,finish:!0,endGameMsg:e})}},{key:"render",value:function(){return r.a.createElement(X,{props:this})}}]),t}(r.a.Component),V=a(109),Y=a(111),ee=a(113),te=a(112),ae=a(108),ne=a(107);function re(){return(re=Object(k.a)(b.a.mark(function e(){var t;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"api_category.php",e.next=3,O("api_category.php",!1);case 3:return t=e.sent,e.abrupt("return",t.trivia_categories);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}var ie=Object(ne.a)(function(e){return{playBtn:{marginTop:e.spacing(5)},select:{fontSize:"1.5rem"}}});function se(){var e=ie();return r.a.createElement(d.Consumer,null,function(t){var a=t.state,n=a.difficulty,i=a.category,s=t.onChange,c=t.onClick;return r.a.createElement(g.a,{container:!0,justify:"center",alignContent:"space-around"},r.a.createElement(ae.a,null,r.a.createElement(ce,{difficulty:n,onChange:s,className:e.select}),r.a.createElement(oe,{category:i,onChange:s,className:e.select}),r.a.createElement(V.a,{size:"large",onClick:c,className:e.playBtn,variant:"extended",color:"primary"},r.a.createElement(_.a,{variant:"h4"},"Start"))))})}function ce(e){var t=e.difficulty,a=e.onChange,n=e.className;return r.a.createElement(ae.a,null,r.a.createElement(ee.a,{htmlFor:"difficulty-select"},"Difficulty"),r.a.createElement(Y.a,{className:n,value:t,onChange:a,input:r.a.createElement(te.a,{name:"difficulty",id:"difficulty-select"})},r.a.createElement("option",{value:"easy"},"Easy"),r.a.createElement("option",{value:"medium"},"Medium"),r.a.createElement("option",{value:"hard"},"Hard"),r.a.createElement("option",{value:"ultimate"},"Ultimate")))}function oe(e){var t=e.category,a=e.onChange,i=e.className,s=Object(n.useState)([]),o=Object(c.a)(s,2),u=o[0],l=o[1];return 0===u.length&&function(){return re.apply(this,arguments)}().then(function(e){return l(e)}),r.a.createElement(ae.a,null,r.a.createElement(ee.a,{htmlFor:"category-select"},"Category"),r.a.createElement(Y.a,{className:i,value:t,onChange:a,input:r.a.createElement(te.a,{name:"category",id:"category-select"})},u.map(function(e){return r.a.createElement("option",{key:e.id,value:JSON.stringify({id:e.id,name:e.name})},e.name)})))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(function(){var e=Object(n.useState)(!1),t=Object(c.a)(e,2),a=t[0],i=t[1];return r.a.createElement(o.a,{maxWidth:"lg"},r.a.createElement(y,{setDisplayGame:i},!a&&r.a.createElement(se,null),a&&r.a.createElement($,null)))},null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[57,1,2]]]);
//# sourceMappingURL=main.bcd2debb.chunk.js.map